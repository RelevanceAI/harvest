# Plan: Establish Plan Infrastructure for Autonomous Agent Workflow

**Phase**: Phase 0 (Rules & Infrastructure)  
**Branch**: `docs/phase-0-rules-finalization`  
**Created**: 2026-01-14 21:00  
**Status**: Awaiting Review

---

## Objective

Implement the plan storage and indexing infrastructure that enables autonomous agent development with clear approval gates and historical feedback loops.

---

## Problem Statement

Currently:
- Plans are scattered across the repo (MASTER_ACTION_PLAN.md at root, various docs/plans/*.md)
- No clear organization for multi-iteration planning (research → plan → implement)
- No timestamped tracking for debugging "which iteration am I on?"
- No indexing system to track active/completed/abandoned plans
- Cannot easily reference plans from PRs for approval gate workflow

This causes:
- Confusion about which plan is current
- Lost context between sessions
- No feedback loop artifacts from plan → implementation

---

## Solution

Create standardized plan infrastructure:

### 1. Directory Structure
```
.claude/plans/
├── README.md (index + instructions)
├── [branch-name]/
│   ├── research_YYYY-MM-DD_HHMM.md
│   ├── plan_YYYY-MM-DD_HHMM.md
│   ├── plan_YYYY-MM-DD_HHMM_v2.md (if revised)
│   └── implementation_YYYY-MM-DD_HHMM.md
```

### 2. Files to Create

#### `.claude/plans/README.md`
- Explains the directory structure and workflow
- Shows index of active/completed/abandoned plans
- Links to PR approvals for each phase
- Documents the three-phase workflow (research → plan → implement)

#### `.claude/plans/docs-phase-0-rules-finalization/plan_2026-01-14_2100.md`
- This file (the meta-plan for setting up the infrastructure)

### 3. Implementation Steps

**Phase A: Create Directory Structure**
1. Create `.claude/plans/` directory
2. Create `.claude/plans/docs-phase-0-rules-finalization/` subdirectory
3. Commit: `mkdir -p .claude/plans/docs-phase-0-rules-finalization/`

**Phase B: Write README**
1. Create `.claude/plans/README.md` with:
   - Explanation of directory structure
   - Timestamp format rationale
   - Versioning strategy (e.g., `plan_v2.md` for revisions)
   - Index template showing active/completed/abandoned phases
   - Link to this plan
2. Example index entry format:
   ```markdown
   ## Active
   - `docs-phase-0-rules-finalization/` - Phase 0 AI Rules (awaiting implementation)
     - Plan: [plan_2026-01-14_2100.md](docs-phase-0-rules-finalization/plan_2026-01-14_2100.md)
     - PR: [#XXX](https://github.com/...#XXX) (plan-review-pending)
   ```

**Phase C: Create This Plan File**
1. Write `.claude/plans/docs-phase-0-rules-finalization/plan_2026-01-14_2100.md` (this file)
2. Self-validate with checklist below

**Phase D: Commit & Open PR**
1. Commit all files with message: `docs(plans): establish plan infrastructure with timestamped organization`
2. Push to feature branch: `docs/phase-0-plan-infrastructure`
3. Create PR with:
   - Title: `[PLAN] Establish Plan Infrastructure for Autonomous Workflows`
   - Label: `phase-review-pending`
   - Description: Link to plan file + brief rationale
   - Body: Copy of this plan or link to it

**Phase E: Await Approval**
- Wait for human approval (checkbox tick on PR)
- If feedback: create `plan_2026-01-14_2100_v2.md` with revisions
- Once approved: close plan PR and proceed to implementation

---

## Success Criteria

- [ ] `.claude/plans/` directory exists
- [ ] `.claude/plans/README.md` created with index template
- [ ] `.claude/plans/docs-phase-0-rules-finalization/plan_2026-01-14_2100.md` committed
- [ ] PR opened with `phase-review-pending` label
- [ ] Can easily find all plans via `ls .claude/plans/`
- [ ] Can understand plan history via timestamps (sortable)
- [ ] README explains the three-phase workflow clearly

---

## Assumptions

1. We're on the `docs/phase-0-rules-finalization` branch (already created)
2. PR labels `phase-review-pending` exist or can be created
3. This infrastructure will be reused for future phases (Phase 1.1, 1.2, 1.3, etc.)
4. The human (you) will review and approve this plan before I proceed

---

## Dependencies

- None (this is foundational work)

---

## Testing Strategy

Manual verification:
1. Verify directory structure exists: `ls -la .claude/plans/`
2. Verify plan file committed: `git log --oneline -- .claude/plans/`
3. Verify PR created and labeled: Check GitHub PR dashboard
4. Verify README explains workflow clearly: Read it

---

## Rollback Plan

If this structure doesn't work:
1. Delete `.claude/plans/` directory
2. Revert commits
3. Document lessons learned
4. Propose alternative structure

---

## Notes

- This is a **meta-plan** - it's setting up infrastructure for future plans
- Once approved, we'll use this structure for Phase 1.1 (Modal Sandbox), Phase 1.2 (GitHub App), etc.
- The timestamps will help me track "which version am I on?" when I restart sessions
- Plans stay in git forever → feedback loop artifact that future work can reference

---

## Next Steps

1. ✅ Research: Completed (structure decided with user)
2. ⏳ Validate with Gemini: About to do
3. ⏳ Create files and commit
4. ⏳ Open PR for approval
5. ⏳ Await approval (phase-review-pending label)
6. ⏳ Close plan PR and proceed to Phase 1.1 planning
